#!/usr/bin/env bash

########################################################################################################################
#
# Define Variables
#
########################################################################################################################
COMMIT_HASH=$(git rev-parse --short HEAD)   # hash commit for Develop Version
BUILD_VERSION=$(python build.py version)    # 3 digit version (for ex. 8.3.0)
IS_RELEASE_BUILD=false                      # if Release make NPM, git tag, git realse etc
#IS_RC_BUILD=false
#IS_PREVIEW_BUILD=false
IS_DEV_BUILD=false                          # build without geoData (drop CDN without latest)
VERSION=''

if [ "${TRAVIS_BRANCH}" = "master" ]; then
    VERSION=${BUILD_VERSION}
    IS_RELEASE_BUILD=true
#elif [ "${TRAVIS_BRANCH}" = "develop" ]; then
#    VERSION=${BUILD_VERSION}-${COMMIT_HASH}
#    IS_PREVIEW_BUILD=true
#elif [[ "${TRAVIS_BRANCH}" =~ ^RC-([0-9]+\.[0-9]+\.[0-9]+)$ ]]; then
#    RC_VERSION=${BASH_REMATCH[1]}
#    if [ "${BUILD_VERSION}" = "${RC_VERSION}" ]; then
#        VERSION=$(python build.py version)
#        IS_RC_BUILD=true
#    else
#        VERSION=${TRAVIS_BRANCH}
#        IS_DEV_BUILD=true
#    fi
elif [[ "${TRAVIS_BRANCH}" =~ ^v([0-9]+\.[0-9]+\.[0-9]+)$ ]]; then
    # v8.3.0 it is a tag. Drop build
    exit 0;
else
    VERSION=${TRAVIS_BRANCH}
    IS_DEV_BUILD=true
fi
INSTALL_PACKAGE_NAME=anychart-installation-package-${VERSION}.zip

echo
echo '################################'
echo 'VARIABLES:'
echo Version: ${VERSION}
echo Branch: ${TRAVIS_BRANCH}
echo Commit Hash: ${COMMIT_HASH}
echo Is release build: ${IS_RELEASE_BUILD}
#echo Is RC build: ${IS_RC_BUILD}
#echo Is dev preview build: ${IS_PREVIEW_BUILD}
echo Is develop build: ${IS_DEV_BUILD}
echo '################################'
echo
########################################################################################################################
#
########################################################################################################################


########################################################################################################################


########################################################################################################################

########################################################################################################################
########################################################################################################################
########################################################################################################################
########################################################################################################################
########################################################################################################################
########################################################################################################################
########################################################################################################################
########################################################################################################################
########################################################################################################################
########################################################################################################################